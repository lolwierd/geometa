(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2989:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>T});var a=s(5155),l=s(2115),r=s(9434);let n=l.forwardRef((e,t)=>{let{className:s,type:l,...n}=e;return(0,a.jsx)("input",{type:l,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...n})});n.displayName="Input";var i=s(285);let o=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-white text-foreground shadow transition-shadow hover:shadow-lg dark:bg-zinc-800",s),...l})});o.displayName="Card",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-4",s),...l})}).displayName="CardHeader";let c=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("p-4 pt-0",s),...l})});c.displayName="CardContent",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-4 pt-0",s),...l})}).displayName="CardFooter";var d=s(5830),m=s(4213),h=s(4869),x=s(4516),u=s(7924),f=s(3904),g=s(6474),p=s(4839),j=s(7863),b=s(5196);let N=p.bL;p.YJ;let w=p.WT,v=l.forwardRef((e,t)=>{let{className:s,children:l,...n}=e;return(0,a.jsxs)(p.l9,{ref:t,className:(0,r.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...n,children:[l,(0,a.jsx)(p.In,{asChild:!0,children:(0,a.jsx)(g.A,{className:"h-4 w-4 opacity-50"})})]})});v.displayName=p.l9.displayName;let y=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(p.PP,{ref:t,className:(0,r.cn)("flex cursor-default items-center justify-center py-1",s),...l,children:(0,a.jsx)(j.A,{className:"h-4 w-4"})})});y.displayName=p.PP.displayName;let k=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(p.wn,{ref:t,className:(0,r.cn)("flex cursor-default items-center justify-center py-1",s),...l,children:(0,a.jsx)(g.A,{className:"h-4 w-4"})})});k.displayName=p.wn.displayName;let S=l.forwardRef((e,t)=>{let{className:s,children:l,position:n="popper",...i}=e;return(0,a.jsx)(p.ZL,{children:(0,a.jsxs)(p.UC,{ref:t,className:(0,r.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...i,children:[(0,a.jsx)(y,{}),(0,a.jsx)(p.LM,{className:(0,r.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,a.jsx)(k,{})]})})});S.displayName=p.UC.displayName,l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(p.JU,{ref:t,className:(0,r.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...l})}).displayName=p.JU.displayName;let C=l.forwardRef((e,t)=>{let{className:s,children:l,...n}=e;return(0,a.jsxs)(p.q7,{ref:t,className:(0,r.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(p.VF,{children:(0,a.jsx)(b.A,{className:"h-4 w-4"})})}),(0,a.jsx)(p.p4,{children:l})]})});C.displayName=p.q7.displayName,l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(p.wv,{ref:t,className:(0,r.cn)("-mx-1 my-1 h-px bg-muted",s),...l})}).displayName=p.wv.displayName;var _=s(4636),E=s(9803),A=s(6766),I=s(822),R=s(3843),L=s(4165),D=s(2657),z=s(2525),P=s(4416),F=s(2355),M=s(3052);function $(e){let{location:t,onDelete:s}=e,[r,n]=(0,l.useState)(!1),[o,c]=(0,l.useState)(0),[d,m]=(0,l.useState)({}),[h,u]=(0,l.useState)(!1),f=(0,l.useRef)(null),g=async e=>{if(e.stopPropagation(),confirm('Are you sure you want to delete the location "'.concat(t.country,'"?')))try{let e=await fetch("".concat(R.JR,"/gallery?id=").concat(t.id),{method:"DELETE"});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to delete")}s(t.id)}catch(t){console.error("Failed to delete location:",t);let e=t instanceof Error?t.message:"Unknown error";alert("Failed to delete location: ".concat(e))}},p=e=>{n(e),e||(u(!1),c(0))},b=e=>{m(t=>({...t,[e]:!0}))},N=Array.isArray(t.images)?t.images.filter(e=>e&&!d[e]):[],w=e=>e?"".concat(R.JR,"/img?u=").concat(encodeURIComponent(e)):"",v=(e=>{if(!e)return null;let t=new DOMParser().parseFromString(e,"text/html").querySelector("a");return t?t.href:null})(t.footer),y=t.note?I.A.sanitize(t.note):"";return(0,l.useEffect)(()=>{h&&f.current&&f.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[h]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-slate-800 rounded-lg overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02] cursor-pointer group h-full flex flex-col",onClick:()=>p(!0),children:[(0,a.jsxs)("div",{className:"absolute top-2 right-2 z-10 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)(i.$,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),p(!0)},className:"h-7 w-7 p-0 text-white/80 bg-black/50 hover:bg-black/70 hover:text-white backdrop-blur-sm",title:"View details",children:(0,a.jsx)(D.A,{className:"h-3 w-3"})}),(0,a.jsx)(i.$,{variant:"ghost",size:"sm",onClick:g,className:"h-7 w-7 p-0 text-white/80 bg-black/50 hover:bg-red-600 hover:text-white backdrop-blur-sm",title:"Delete location",children:(0,a.jsx)(z.A,{className:"h-3 w-3"})})]}),(0,a.jsxs)("div",{className:"p-4 text-white flex-1 flex flex-col",children:[(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[t.country_code&&(0,a.jsx)(A.default,{src:w("https://flagcdn.com/40x30/".concat(t.country_code.toLowerCase(),".png")),width:20,height:15,alt:"".concat(t.country," flag"),className:"rounded-sm",unoptimized:!0,onError:e=>e.target.style.display="none"}),(0,a.jsx)("div",{className:"min-w-0 flex-1",children:(0,a.jsxs)("h2",{className:"text-sm font-semibold text-white truncate",children:[t.country,t.meta_name&&(0,a.jsxs)("span",{className:"text-xs font-normal text-slate-300 ml-1",children:["- ",t.meta_name]})]})})]}),t.note&&(0,a.jsx)("div",{className:"mb-3 text-slate-300 leading-relaxed",children:(0,a.jsx)("p",{className:"text-xs",children:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150;if(!e)return"";let s=e&&new DOMParser().parseFromString(e,"text/html").body.textContent||"";return s.length>t?s.substring(0,t)+"...":s}(t.note,150)})})]}),(0,a.jsxs)("div",{className:"mt-auto",children:[N.length>0&&(0,a.jsxs)("div",{className:"relative rounded-md overflow-hidden bg-slate-900 group/image",children:[(0,a.jsx)("div",{className:"aspect-video",children:(0,a.jsx)(A.default,{src:w(N[0]),alt:"Location meta image",width:320,height:180,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",unoptimized:!0,onError:e=>b(N[0])})}),N.length>1&&(0,a.jsxs)("div",{className:"absolute top-2 right-2 bg-black/70 text-white text-xs px-1.5 py-0.5 rounded backdrop-blur-sm",children:["+",N.length-1]}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-300 flex items-center justify-center",children:(0,a.jsx)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-12 h-12 border-2 border-white/50 rounded-full flex items-center justify-center backdrop-blur-sm bg-black/20",children:(0,a.jsx)(D.A,{className:"h-5 w-5 text-white/70"})})})})]}),0===N.length&&(0,a.jsx)("div",{className:"aspect-video bg-slate-700 rounded-md flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center text-slate- 400",children:[(0,a.jsx)(D.A,{className:"h-8 w-8 mx-auto mb-1 opacity-50"}),(0,a.jsx)("p",{className:"text-xs",children:"No image"})]})}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-xs text-slate-500 mt-2 pt-2 border-t border-slate-700",children:[(0,a.jsx)("span",{children:new Date(t.created_at).toLocaleDateString()}),N.length>0&&(0,a.jsxs)("span",{children:[N.length," img",1!==N.length?"s":""]})]})]})]})]}),(0,a.jsx)(L.lG,{open:r,onOpenChange:p,children:(0,a.jsxs)(L.Cf,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col bg-slate-800 border-slate-600 text-white p-0 break-words",children:[(0,a.jsx)(L.c7,{className:"flex-shrink-0 p-4 bg-slate-900/50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4 w-full",children:[(0,a.jsxs)(L.L3,{className:"flex justify-between items-center gap-4 text-white flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[t.country_code&&(0,a.jsx)(a.Fragment,{children:v?(0,a.jsx)("a",{href:v,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),title:"Open source link",className:"flex-shrink-0",children:(0,a.jsx)(A.default,{src:w("https://flagcdn.com/64x48/".concat(t.country_code.toLowerCase(),".png")),width:32,height:24,alt:"".concat(t.country," flag"),className:"rounded-sm border-slate-600 hover:border-blue-400 transition-colors",unoptimized:!0,onError:e=>e.target.style.display="none"})}):(0,a.jsx)(A.default,{src:w("https://flagcdn.com/64x48/".concat(t.country_code.toLowerCase(),".png")),width:32,height:24,alt:"".concat(t.country," flag"),className:"rounded-sm border-slate-600 flex-shrink-0",unoptimized:!0,onError:e=>e.target.style.display="none"})}),(0,a.jsx)("span",{className:"text-2xl font-bold",children:t.country})]}),t.meta_name&&(0,a.jsx)("span",{className:"text-lg text-slate-300 font-normal text-right",children:t.meta_name})]}),(0,a.jsx)(L.rr,{className:"sr-only",children:"Detailed view of location meta information including images and technical details"}),(0,a.jsx)(L.HM,{asChild:!0,children:(0,a.jsx)(i.$,{variant:"ghost",size:"icon",className:"text-white hover:bg-slate-700/50 flex-shrink-0",title:"Close",children:(0,a.jsx)(P.A,{className:"h-4 w-4"})})})]})}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-scroll p-6 space-y-6 [scrollbar-gutter:stable]",children:[t.note&&(0,a.jsx)("div",{className:"prose prose-invert prose-slate max-w-none text-slate-200",children:(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:y}})}),N.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"relative rounded-lg overflow-hidden bg-slate-900/50 border border-slate-700",children:[(0,a.jsx)(A.default,{src:w(N[o]),alt:"Meta image ".concat(o+1),width:1920,height:1080,className:"w-full max-h-[60vh] object-contain rounded-md",unoptimized:!0,onError:e=>b(N[o])}),N.length>1&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>{c(e=>(e-1+N.length)%N.length)},className:"absolute left-4 top-1/2 -translate-y-1/2 bg-black/70 border-slate-600 text-white hover:bg-black/90",children:(0,a.jsx)(F.A,{className:"h-4 w-4"})}),(0,a.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>{c(e=>(e+1)%N.length)},className:"absolute right-4 top-1/2 -translate-y-1/2 bg-black/70 border-slate-600 text-white hover:bg-black/90",children:(0,a.jsx)(M.A,{className:"h-4 w-4"})})]})]}),N.length>1&&(0,a.jsx)("div",{className:"flex justify-center gap-2 pt-2",children:N.map((e,t)=>(0,a.jsx)("button",{onClick:()=>c(t),className:"w-2.5 h-2.5 rounded-full transition-colors ".concat(t===o?"bg-blue-500":"bg-slate-600 hover:bg-slate-500"),title:"Image ".concat(t+1)},t))})]}),h&&(0,a.jsxs)("div",{ref:f,className:"pt-6 border-t border-slate-700",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h4",{className:"font-medium text-lg text-slate-200",children:"Technical Details"}),(0,a.jsx)("a",{href:"https://www.google.com/maps?layer=c&panoid=".concat(t.pano_id),target:"_blank",rel:"noopener noreferrer",title:"Open in Google Street View",children:(0,a.jsxs)(i.$,{variant:"outline",size:"sm",className:"bg-slate-700 border-slate-600 text-white hover:bg-slate-600",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Street View"]})})]}),(0,a.jsxs)("dl",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 text-sm",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("dt",{className:"font-medium text-slate-400",children:"Pano ID"}),(0,a.jsx)("dd",{className:"bg-slate-900 px-3 py-1.5 rounded-md text-xs font-mono border border-slate-700 text-slate-300",children:t.pano_id})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("dt",{className:"font-medium text-slate-400",children:"Map ID"}),(0,a.jsx)("dd",{className:"bg-slate-900 px-3 py-1.5 rounded-md text-xs font-mono border border-slate-700 text-slate-300",children:t.map_id})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("dt",{className:"font-medium text-slate-400",children:"Collected"}),(0,a.jsxs)("dd",{className:"text-slate-300 pt-1",children:[(0,a.jsx)("span",{className:"block",children:new Date(t.created_at).toLocaleDateString()}),(0,a.jsx)("span",{className:"block text-xs text-slate-500",children:new Date(t.created_at).toLocaleTimeString()})]})]}),t.updated_at!==t.created_at&&(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("dt",{className:"font-medium text-slate-400",children:"Updated"}),(0,a.jsxs)("dd",{className:"text-slate-300 pt-1",children:[(0,a.jsx)("span",{className:"block",children:new Date(t.updated_at).toLocaleDateString()}),(0,a.jsx)("span",{className:"block text-xs text-slate-500",children:new Date(t.updated_at).toLocaleTimeString()})]})]})]})]})]}),(0,a.jsx)("div",{className:"flex-shrink-0 text-center border-t border-slate-700",children:(0,a.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>u(!h),className:"h-7 w-full text-slate-500 hover:text-white hover:bg-slate-700/50 rounded-none",title:h?"Hide details":"Show details",children:(0,a.jsx)(j.A,{className:"h-4 w-4 transition-transform duration-200 ".concat(!h&&"rotate-180")})})})]})})]})}var G=s(6874),U=s.n(G),q=s(5695);function O(){let[e,t]=(0,l.useState)([]),[s,r]=(0,l.useState)([]),[p,j]=(0,l.useState)([]),[b,y]=(0,l.useState)({total_locations:0,total_countries:0}),[k,A]=(0,l.useState)(!0),[I,L]=(0,l.useState)(null),[D,z]=(0,l.useState)(""),[P,F]=(0,l.useState)([]),[M,G]=(0,l.useState)([]),[O,T]=(0,l.useState)({limit:72,offset:0,hasMore:!1,page:1,totalPages:1}),[J,V]=(0,l.useState)(3e3),[H,W]=(0,l.useState)(!0),Y=(0,q.useRouter)(),Z=(0,q.useSearchParams)(),B=(0,q.usePathname)(),K=(0,l.useRef)(null);(0,l.useEffect)(()=>{let e=localStorage.getItem("refreshInterval"),t=localStorage.getItem("autoRefreshEnabled");e&&V(parseInt(e,10)),t&&W("true"===t)},[]),(0,l.useEffect)(()=>{localStorage.setItem("refreshInterval",J.toString()),localStorage.setItem("autoRefreshEnabled",H.toString())},[J,H]),(0,l.useEffect)(()=>{let e=Z.get("q")||"",t=Z.get("country"),s=Z.get("continent"),a=parseInt(Z.get("limit")||"72",10),l=parseInt(Z.get("offset")||"0",10);z(e),F(t?t.split(","):[]),G(s?s.split(","):[]),T(e=>({...e,limit:a,offset:l,page:Math.floor(l/a)+1}))},[Z]);let Q=(0,l.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{A(!0),L(null);let s=new URLSearchParams(Z.toString()),a=parseInt(s.get("limit")||O.limit.toString(),10),l=e?parseInt(s.get("offset")||"0",10):O.offset;s.set("limit",a.toString()),s.set("offset",l.toString());let n=await fetch("".concat(R.JR,"/gallery?").concat(s));if(!n.ok)throw Error("Failed to fetch locations: ".concat(n.status));let i=await n.json();if(!i.success)throw Error("API returned an error");t(t=>e?i.locations:[...t,...i.locations]),r(i.countries),j(i.continents),y(i.stats),T({...i.pagination,offset:i.pagination.offset+i.pagination.limit})}catch(e){console.error("Failed to fetch locations:",e),L(e instanceof Error?e.message:"An unknown error occurred")}finally{A(!1)}},[Z,O.limit,O.offset]),X=(0,l.useRef)(Q);(0,l.useEffect)(()=>{X.current=Q},[Q]),(0,l.useEffect)(()=>{X.current(!0)},[Z]),(0,l.useEffect)(()=>{let e=()=>{"visible"===document.visibilityState&&X.current(!0)};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[]),(0,l.useEffect)(()=>{if(!H)return;let e=setInterval(()=>{X.current(!0)},J);return()=>clearInterval(e)},[J,H]);let ee=(0,l.useRef)(k);(0,l.useEffect)(()=>{ee.current=k},[k]),(0,l.useEffect)(()=>{let e=K.current;if(!e||!O.hasMore)return;let t=new IntersectionObserver(e=>{e[0].isIntersecting&&!ee.current&&X.current(!1)},{rootMargin:"200px"});return t.observe(e),()=>t.disconnect()},[O.hasMore]);let et=()=>{window.scrollTo({top:0,behavior:"auto"})},es=e=>{t(t=>t.filter(t=>t.id!==e)),y(e=>({...e,total_locations:e.total_locations-1}))},ea=()=>{et(),z(""),F([]),G([]),T(e=>({...e,offset:0,page:1})),Y.replace(B)};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900",children:(0,a.jsxs)("div",{className:"container mx-auto px-2 py-6",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("h1",{className:"text-4xl font-bold mb-2 text-white",children:["GeoMeta ",(0,a.jsx)("span",{className:"text-blue-400",children:"Gallery"})]}),(0,a.jsx)("p",{className:"text-slate-300",children:"Your personal collection of GeoGuessr meta clues and learning materials"})]}),(0,a.jsx)(U(),{href:"/memorizer",className:"mt-4 sm:mt-0",children:(0,a.jsxs)(i.$,{variant:"outline",className:"w-full sm:w-auto bg-slate-700 border-slate-600 text-white hover:bg-slate-600",children:[(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Memorizer"]})})]}),(0,a.jsxs)("div",{className:"flex gap-4 text-sm text-slate-400",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[b.total_locations," locations"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(h.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[b.total_countries," countries"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[e.length," loaded"]})]})]})]}),(0,a.jsx)(o,{className:"mb-6 bg-slate-800 border-slate-700",children:(0,a.jsx)(c,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),et(),T(e=>({...e,offset:0,page:1}));let t=new URLSearchParams(Z.toString());D.trim()?t.set("q",D.trim()):t.delete("q"),P.length>0?t.set("country",P.join(",")):t.delete("country"),M.length>0?t.set("continent",M.join(",")):t.delete("continent"),t.delete("offset"),Y.replace("".concat(B,"?").concat(t.toString()))},className:"flex gap-2 flex-1",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),(0,a.jsx)(n,{type:"text",placeholder:"Search countries, meta names, notes...",value:D,onChange:e=>z(e.target.value),className:"pl-10 bg-slate-700 border-slate-600 text-white placeholder:text-slate-400"})]}),(0,a.jsx)(i.$,{type:"submit",variant:"outline",className:"bg-slate-700 border-slate-600 text-white hover:bg-slate-600",children:"Search"})]}),(0,a.jsx)(E.h,{options:p.map(e=>({value:e,label:e})),selected:M,onChange:e=>{et(),G(e),T(e=>({...e,offset:0,page:1}));let t=new URLSearchParams(Z.toString());D.trim()?t.set("q",D.trim()):t.delete("q"),P.length>0?t.set("country",P.join(",")):t.delete("country"),e.length>0?t.set("continent",e.join(",")):t.delete("continent"),t.delete("offset"),Y.replace("".concat(B,"?").concat(t.toString()))},placeholder:"Filter by continent...",className:"w-full md:w-[220px]"}),(0,a.jsx)(E.h,{options:s.map(e=>({value:e,label:e})),selected:P,onChange:e=>{et(),F(e),T(e=>({...e,offset:0,page:1}));let t=new URLSearchParams(Z.toString());D.trim()?t.set("q",D.trim()):t.delete("q"),e.length>0?t.set("country",e.join(",")):t.delete("country"),M.length>0?t.set("continent",M.join(",")):t.delete("continent"),t.delete("offset"),Y.replace("".concat(B,"?").concat(t.toString()))},placeholder:"Filter by country...",className:"w-full md:w-[280px]"}),(0,a.jsxs)("div",{className:"relative inline-flex",children:[(0,a.jsxs)(i.$,{onClick:ea,variant:"outline",className:"sm:w-auto bg-slate-700 border-slate-600 text-white hover:bg-slate-600 pr-8",children:[(0,a.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Refresh"]}),(0,a.jsxs)(_.AM,{children:[(0,a.jsx)(_.Wv,{asChild:!0,children:(0,a.jsx)(i.$,{variant:"outline",className:"absolute right-0 top-0 h-full w-8 border-l border-slate-600 bg-slate-700 text-white hover:bg-slate-600 rounded-l-none",children:(0,a.jsx)(g.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(_.hl,{className:"w-56 bg-slate-700 text-white border-slate-600",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,a.jsx)("input",{type:"checkbox",id:"auto-refresh",className:"h-4 w-4",checked:H,onChange:e=>W(e.target.checked)}),(0,a.jsx)("label",{htmlFor:"auto-refresh",className:"text-sm",children:"Auto refresh"})]}),(0,a.jsxs)(N,{value:J.toString(),onValueChange:e=>V(parseInt(e,10)),disabled:!H,children:[(0,a.jsx)(v,{className:"w-full bg-slate-700 border-slate-600 text-white",children:(0,a.jsx)(w,{placeholder:"Interval"})}),(0,a.jsxs)(S,{className:"bg-slate-700 text-white border-slate-600",children:[(0,a.jsx)(C,{value:"3000",children:"3s"}),(0,a.jsx)(C,{value:"5000",children:"5s"}),(0,a.jsx)(C,{value:"10000",children:"10s"}),(0,a.jsx)(C,{value:"30000",children:"30s"})]})]})]})]})]})]})})}),I&&(0,a.jsx)(o,{className:"mb-6 border-red-500 bg-slate-800",children:(0,a.jsx)(c,{className:"pt-6",children:(0,a.jsxs)("div",{className:"text-red-400",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2 text-white",children:"Error Loading Gallery"}),(0,a.jsx)("p",{className:"text-sm",children:I}),(0,a.jsx)(i.$,{onClick:ea,variant:"outline",className:"mt-3 bg-slate-700 border-slate-600 text-white hover:bg-slate-600",children:"Try Again"})]})})}),k&&0===e.length&&(0,a.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(f.A,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-slate-400"}),(0,a.jsx)("p",{className:"text-slate-300",children:"Loading your collection..."})]})}),!k&&0===e.length&&!I&&(0,a.jsx)(o,{className:"bg-slate-800 border-slate-700",children:(0,a.jsx)(c,{className:"pt-12 pb-12 text-center",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,a.jsx)(x.A,{className:"h-12 w-12 mx-auto mb-4 text-slate-400"}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2 text-white",children:"No Locations Found"}),D||P.length>0||M.length>0?(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-slate-300 mb-4",children:"No locations match your current filters."}),(0,a.jsx)(i.$,{onClick:()=>{z(""),F([]),G([])},variant:"outline",className:"bg-slate-700 border-slate-600 text-white hover:bg-slate-600",children:"Clear Filters"})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-slate-300 mb-4",children:"You haven't collected any locations yet. Install the userscript and play some GeoGuessr to start building your collection!"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-slate-400",children:[(0,a.jsx)("p",{children:"\uD83D\uDCE5 Install the GeoMeta Collector userscript"}),(0,a.jsx)("p",{children:"\uD83C\uDFAE Play GeoGuessr games"}),(0,a.jsx)("p",{children:"âœ¨ Watch your collection grow automatically"})]})]})]})})}),e.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-3 mb-6 auto-rows-fr",children:e.map(e=>(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)($,{location:e,onDelete:es})},e.id))}),O.hasMore&&(0,a.jsx)("div",{ref:K,className:"h-px"}),(0,a.jsxs)("div",{className:"text-center mt-4 text-sm text-slate-400",children:["Showing ",e.length," of ",b.total_locations," locations"]})]})]})})}function T(){return(0,a.jsx)(l.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading..."}),children:(0,a.jsx)(O,{})})}},3941:(e,t,s)=>{Promise.resolve().then(s.bind(s,2989))}},e=>{e.O(0,[877,195,557,441,964,358],()=>e(e.s=3941)),_N_E=e.O()}]);